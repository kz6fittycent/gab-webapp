name: gab
version: '1.0'
summary: A webapp for Gab.com
description: |
  A webapp for Gab.com
  
license: MIT

assumes:
  - command-chain
  
base: core20
grade: stable
confinement: strict

apps:
  gab:
    command: launch
    command-chain: 
      - bin/homeishome-launch
    plugs:
      - network
      - home
      
parts:
  gab:
    plugin: dump
    source: scripts
    after: 
      - nativefier
    
  nativefier:
    plugin: nil
    source: https://github.com/nativefier/nativefier.git
    source-type: git
    build-packages:
      - git
      - npm
    
    override-build: |
    
      # Using Ogra's workaround - in part
      
      npm install nativefier -g 
           
      # copy node and npm
      mkdir -p $SNAPCRAFT_PART_INSTALL/bin
      cp -av $SNAPCRAFT_PART_SRC/* $SNAPCRAFT_PART_INSTALL/bin/
   
  homeishome-launch:
    plugin: nil
    stage-snaps:
      - homeishome-launch
